<html lang="en">
    <%- include('./partials/head.ejs') %>
<body>

    <%- include('./partials/nav.ejs') %>

    <form class="auth_form">
        <h2>Enter your Email</h2>
        <div>
            <label for="email"></label>
            <input name="email" id="email" type="text" placeholder="Email">
         </div>
        <button id="login_btn">Send</button> 
        <h3>Click send to get password reset email</h3>


    </form>

    <script>
        let form = document.querySelector("form")

        form.onsubmit = async function(e){
            e.preventDefault()
            const email = document.getElementById("email").value
            try{
                const res = await fetch('/password_reset',{
                method:"POST",
                body:JSON.stringify({email}),
                headers:{'Content-Type':'application/json'}
                })
                const data = await res.json()
                console.log(data)

                alert("Email sent, please check you mailbox")
                
            }catch(err){
                console.log(err)
            }

        }
    </script>

</body>
</html>